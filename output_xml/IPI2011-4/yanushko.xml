<?xml version="1.0" encoding="utf-8"?>
<papers>
  <paper>
    <metadata>
      <annotation value="\Abst{Статья затрагивает проблемы унифицированного взаимодействия с разнотипными СУБД в различных программных средах. Рассмотрены существующие разработки в данной области, проанализированы их достоинства и недостатки. Перечислены требования к кроссплатформенному инструменту взаимодействия прикладного кода С++ с СУБД. Предложено решение, реализованное в виде динамической библиотеки. Библиотека предоставляет специализированные классы для каждого из понятий реляционных баз данных: собственно база данных, соединение, таблица, средства манипулирования данными и т.д. Проанализированы границы применимости предложенных решений и практика использования библиотеки в реальных проектах. Приведены примеры кода.}"/>
      <keywords>
        <braces>
          <text value="\KW{СУБД; C++; библиотека взаимодействия; кроссплатформенность}"/>
        </braces>
      </keywords>
    </metadata>
    <fulltext>
      <literature/>
      <text value="yanushko"/>
      <text value="РЕШЕНИЕ ПРОБЛЕМ ВЗАИМОДЕЙСТВИЯ С СУБД В КРОССПЛАТФОРМЕННОЙ БИБЛИОТЕКЕ EFFIDB"/>
      <text value="Решение проблем взаимодействия с СУБД в кроссплатформенной библиотеке EFFIDB"/>
      <text value="А."/>
      <text value="В. Янушко, А."/>
      <text value="В. Бабанин, О."/>
      <text value="А. Кузнецова, С."/>
      <text value="В. Петрушенко"/>
      <text value="А."/>
      <text value="В. Янушко$^1$, А."/>
      <text value="В. Бабанин$^2$, О."/>
      <text value="А. Кузнецова$^3$, С."/>
      <text value="В. Петрушенко$^4$"/>
      <command value="\titel">
        <braces>
          <braces>
            <text value="{}"/>
            <command value="\tit">
              <braces/>
              <braces>
                <braces>
                  <text value="{}"/>
                  <command value="\aut">
                    <braces/>
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <command value="\autkol">
                          <braces/>
                          <braces>
                            <braces>
                              <text value="{}"/>
                              <command value="\titkol">
                                <braces/>
                              </command>
                            </braces>
                          </braces>
                        </command>
                      </braces>
                    </braces>
                  </command>
                </braces>
              </braces>
            </command>
          </braces>
        </braces>
      </command>
      <command value="\renewcommand">
        <braces>
          <braces>
            <text value="{}"/>
            <command value="\thefootnote">
              <braces/>
              <braces>
                <braces>
                  <text value="{}"/>
                  <command value="\arabic">
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <text value="footnote"/>
                      </braces>
                    </braces>
                    <braces/>
                    <braces/>
                  </command>
                </braces>
              </braces>
            </command>
          </braces>
        </braces>
      </command>
      <command value="\footnotetext">
        <braces>
          <text value="\footnotetext[1]{}"/>
        </braces>
      </command>
      <text value="АСофт, yan@asoft.ru"/>
      <command value="\footnotetext">
        <braces>
          <text value="\footnotetext[2]{}"/>
        </braces>
      </command>
      <text value="Всероссийский научно-исследовательский институт проблем вычислительной техники и информатизации, ababanin@pvti.ru"/>
      <command value="\footnotetext">
        <braces>
          <text value="\footnotetext[3]{}"/>
        </braces>
      </command>
      <text value="АСофт, ok@asoft.ru"/>
      <command value="\footnotetext">
        <braces>
          <text value="\footnotetext[4]{}"/>
        </braces>
      </command>
      <text value="АСофт, op@asoft.ru"/>
      <command value="\vspace*">
        <braces>
          <braces>
            <text value="{}"/>
            <text value="6pt"/>
          </braces>
        </braces>
        <braces/>
      </command>
      <command value="\vspace*">
        <braces>
          <braces>
            <text value="{}"/>
            <text value="2pt"/>
          </braces>
        </braces>
        <braces/>
      </command>
      <command value="\vspace*">
        <braces>
          <braces>
            <text value="{}"/>
            <text value="6pt"/>
          </braces>
        </braces>
        <braces/>
      </command>
      <command value="\vskip">
        <braces>
          <text value="14pt plus 9pt minus 6pt"/>
        </braces>
      </command>
      <command value="\thispagestyle">
        <braces>
          <braces>
            <text value="{}"/>
            <text value="headings"/>
          </braces>
        </braces>
        <braces/>
      </command>
      <command value="\begin">
        <braces>
          <braces>
            <text value="{}"/>
            <text value="2"/>
          </braces>
        </braces>
        <braces/>
      </command>
      <command value="\label">
        <braces>
          <braces>
            <text value="{}"/>
            <text value="st"/>
            <command value="\stat">
              <braces/>
            </command>
          </braces>
        </braces>
      </command>
      <section id="id1">
        <braces>
          <text value="\section{}"/>
        </braces>
        <text value="Введение"/>
        <text value="Современные информационные системы автоматизации деятельности предприятий представляют собой многокомпонентные программные комплексы. С прикладной точки зрения в любой информационной системе можно выделить три логических компоненты: слой отображения данных, слой обработки данных и слой хранения данных."/>
        <braces>
          <text value="{}"/>
          <command value="\looseness">
            <braces>
              <text value="=1"/>
            </braces>
            <braces/>
            <braces>
              <text value="Данная работа посвящена фундаментальной составляющей информационной системы, а именно системам управления базами данных и средствам взаимодействия серверов приложений с различными СУБД. Несмотря на то что базы данных и СУБД составляют обширную тему исследований и разработок, в этой области остается много нерешенных проблем. В статье рассматривается проблема организации работы приложений, написанных на C++, с множеством разнотипных СУБД. Предлагаемое решение заключается в создании промежуточного звена доступа к различным СУБД, при этом разработчик не должен задумываться о наличии такого промежуточного слоя и желательно, чтобы взаимодействие со средством доступа происходило стандартным образом, с использованием распространенных технологий."/>
            </braces>
          </command>
        </braces>
      </section>
      <section id="id2">
        <braces>
          <text value="\section{}"/>
        </braces>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="EffiDB"/>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-6pt"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <text value="C++ библиотека EffiDB представляет собой набор интерфейсов, позволяющий взаимодействовать единым образом с системами управления базами данных. Целью создания библиотеки ставилось предоставление унифицированного доступа к различным СУБД и изоляция прикладного программиста от какого бы то ни было непосредственного низкоуровневого взаимодействия с базой данных. Библиотека EffiDB доступна для использования в среде Linux (компилятор gcc версий 4.2--4.5), Windows (компилятор MS VC++ 2010), MacOS (компилятор gcc 4.2.1 и выше). Авторам неизвестно никаких препятствий для сборки библиотеки иными компиляторами, поддерживающими стандарт C++ ISO/IEC 14882 1998 г., а также препятствий для использования библиотеки под управлением иных POSIX-совместимых ОС. Однако никаких работ в этом направлении авторами не проводилось. Специализация работы с каждой конкретной СУБД заключена в отдельных библиотеках, которые далее называются драйверами. Библиотека"/>
          </braces>
        </command>
        <command value="\linebreak">
          <braces>
            <text value="\linebreak"/>
          </braces>
        </command>
        <command value="\mbox">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="EffiDB"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <text value="управляет соединениями с базой данных,"/>
          </braces>
        </command>
        <command value="\linebreak">
          <braces>
            <text value="\linebreak"/>
          </braces>
        </command>
        <text value="формирует и исполняет SQL-запросы, интерпретирует полученные результаты. Она также предостав-"/>
        <command value="\linebreak">
          <braces>
            <text value="\linebreak"/>
          </braces>
        </command>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-12pt"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\pagebreak"/>
        <command value="\noindent">
          <braces>
            <text value="\noindent"/>
          </braces>
        </command>
        <text value="ляет механизмы кэширования результатов запросов и автоматического менеджмента памяти, что повышает надежность и производительность кода. В настоящий момент доступны драйверы для работы со следующими СУБД: MySQL, MSSQL, Oracle и SQLite. В случае когда отдельные модули системы выполняют кооперированные действия с одним и тем же объектом базы данных, требуется, чтобы все операции совершались в рамках одной транзакции. Специализированный драйвер Invariant инициирует отдельный процесс исключительно для коммуникации с базой данных, что позволяет объединить все обращения к базе данных в одном соединении. Драйвер Invariant не имеет специфики СУБД и может быть использован с любой из поддерживаемых СУБД. В зависимости от поставленных задач и степени подготовки разработчика можно выделить 4 уровня использования EffiDB:"/>
        <enumerate/>
        <text value="Хотя это и может показаться парадоксальным на первый взгляд, дублирование информации приводит к ее потере. При наличии нескольких реплик данных возникают проблемы синхронизации, определения степени актуальности каждого отдельного экземпляра и, как следствие, появляется риск потери информации. Достаточно распространена ситуация, когда необходимо обрабатывать агрегированную информацию из нескольких баз данных (в общем случае с использованием разных СУБД). Копирование данных в единое хранилище с целью их консолидации и дальнейшей обработки представляется неэффективным в силу вышеупомянутых причин. Библиотека EffiDB позволяет одновременно обращаться к нескольким базам данных под управлени"/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="задаче миграции данных из одной информационной системы в другую. Благодаря EffiDB процедура миграции может выполняться напрямую без промежуточных шагов. Библиотека EffiDB предназначена для построения сложных многокомпонентных информационных систем. В таких системах бизнес-логика"/>
        <command value="\mbox">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="обычно"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <text value="распределяется между несколькими приложениями (модулями), которые совместно работают с общей базой данных. Хрестоматийным примером, иллюстрирующим такую ситуацию, можно считать перевод денег с одного счета на другой: один модуль снимает деньги со счета-донора и вызывает второй модуль, который, в свою очередь, зачисляет средства на счет-акцептор. Таким образом, одно действие (перевод средств) может быть представлено несколькими отдельными, но тем не менее зависимыми друг от друга операциями приложений над объектами одной базы данных. Реализация такого действия в информационной системе требует, чтобы каждый участвующий в процессе модуль последовательно совершал необходимую операцию и передавал управление следующему модулю до тех пор, пока все операции не будут выполнены. Обеспечение транзакционной целостности базы данных означает, что все операции (снятие и зачисление средств в вышеприведенном примере) должны производиться в одной транзакции. Это было бы невозможно, если бы каждый модуль действовал изолированно и устанавливал собственное соединение с базой дан-"/>
          </braces>
        </command>
        <command value="\linebreak">
          <braces>
            <text value="\linebreak"/>
          </braces>
        </command>
        <text value="ных. Для устранения этого противоречия в EffiDB используется специализированный драйвер Invariant. Если в индивидуальных процессах приложений требуется взаимодействие с базой данных, драйвер создает специальный процесс для коммуникации с базой данных и устанавливает единое соединение с ней. В результате логически связанные действия разных приложений выполняются в рамках одной транзакции."/>
      </section>
      <section id="id3">
        <braces>
          <text value="\section{}"/>
        </braces>
        <text value="Аналогичные разработки"/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="так называемые средства объектно-реляционного отображения, весьма представительный список которых представлен в Wikipedia"/>
        <command value="\cite">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="6-y"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <text value=". Некоторые популярные инструменты сведены в табл. 1, где указаны поддерживаемые операционные системы, СУБД, языки программирования. Также в таблице содержатся наиболее важные с точки зрения разработчика прикладного программного обеспечения (ПО) объективные параметры этих инструментов. Такие важнейшие параметры, как лаконичность и простота использования языка запросов, сложно сравнивать объективно, поэтому они исключены из рассмотрения."/>
          </braces>
        </command>
        <command value="\end">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="multicols"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\begin">
          <braces/>
          <braces>
            <text value="b"/>
          </braces>
          <braces/>
        </command>
        <command value="\small"/>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-24pt"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <center/>
        <command value="\end">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="table"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\begin">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="2"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <text value="Под термином &amp;lt;&amp;lt;уровень изоляции&amp;gt;&amp;gt; авторы понимают степень изоляции прикладного кода от специфики целевой СУБД, в том числе в разрезе поддержки того или иного диалекта SQL (Structured Query Language). Низкий уровень изоляции подразумевает необходимость внесения изменений в код прикладного ПО при смене СУБД, высокий уровень изоляции гарантирует переносимость кода прикладного ПО между СУБД без каких-либо изменений. Однако даже с высоким уровнем изоляции адаптация под новую СУБД может требовать перегенерации, перекомпиляции или статической перелинковки кода, а может осуществляться динамически во время работы программы. Контроль синтаксиса запросов в разных системах может осуществляться либо на этапе разработки прикладного ПО (во время компиляции/генерации кода) средствами самого инструмента, либо в момент исполнения SQL-запроса средствами СУБД. Первый подход существенно удешевляет разработку ПО за счет снижения затрат на тестирование (или повышает качество ПО при равных затратах). Набор поддерживаемых типов данных практически не влияет на выбор инструментов доступа при разработке прикладного ПО с нуля, однако в реальной жизни при наличии унаследованного кода или при желании разработчика использовать какие-нибудь дополнительные библиотеки/модули и т."/>
          </braces>
        </command>
        <text value="п."/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="хотя сам LINQ и является бесплатным, для его использования требуется как минимум покупка лицензий Windows и MS SQL, а также зачастую средств разработки (Microsoft Visual Studio и т."/>
        <text value="п.). Другие инструменты, хотя и лишены различных недостатков LINQ, но предоставляют в целом меньшее, иногда существенно меньшее удобство при разработке прикладного ПО. Кроме того, большинство существующих инструментов ориентированы на интерпретируемые языки (PHP, Python, Ruby и т."/>
        <text value="п.) или на языки, компилируемые в промежуточный код (Java, .NET), в то время как разработчики, использующие наиболее популярные компилируемые языки С++ и С, вынуждены пользоваться либо очень неудобными низкоуровневыми библиотеками ODBC (существует несколько реализаций), либо такими функционально ограниченными инструментами, как SOCI, ODB и т."/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="многоплатформенного, поддерживающего разные СУБД, изолирующего прикладного программиста от специфики СУБД и SQL диалектов, способного работать с унаследованными приложениями/библиотеками, разработанными на C++ и С, обладающего компактным и легкочитаемым синтаксисом."/>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-9pt"/>
            </braces>
          </braces>
          <braces/>
        </command>
      </section>
      <section id="id4">
        <braces>
          <text value="\section{}"/>
        </braces>
        <text value="Цели создания EffiDB"/>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-2pt"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\noindent">
          <braces>
            <text value="\noindent"/>
          </braces>
        </command>
        <itemize/>
        <text value="EffiDB использует типы данных библиотеки Boost Optional"/>
        <text value="6"/>
        <text value="."/>
        <command value="\end">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="itemize"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-9pt"/>
            </braces>
          </braces>
          <braces/>
        </command>
      </section>
      <section id="id5">
        <braces>
          <text value="\section{}"/>
        </braces>
        <text value="Концепции EffiDB"/>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-2pt"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <text value="Перейдем к изложению идей, положенных в основу библиотеки EffiDB. Для изоляции программиста от специфики взаимодействия с конкретной СУБД EffiDB использует специализированные классы C++ для каждого из понятий реляционных баз данных. В тех случаях, когда это представляется полезным, текст сопровождается примерами использования библиотеки."/>
          </braces>
        </command>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="-6pt"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <subsection>
          <text value="База данных"/>
          <command value="\vspace*">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="-1pt"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value="Понятию &amp;lt;&amp;lt;база данных&amp;gt;&amp;gt; соответствует класс"/>
            </braces>
          </command>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Effi::DataBase"/>
              </braces>
              <braces/>
            </command>
          </braces>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="соединение является единственным способом общения с сервером базы данных."/>
          <braces>
            <text value="{}"/>
            <command value="\small"/>
            <command value="\begin">
              <braces>
                <text value="DataBase database= new DataBase(libName, dbParams);"/>
              </braces>
            </command>
            <command value="\end">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="verbatim"/>
                </braces>
              </braces>
              <braces/>
              <braces/>
            </command>
          </braces>
          <command value="\noindent">
            <braces>
              <text value="\noindent"/>
            </braces>
          </command>
          <text value="Здесь"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="libName"/>
              </braces>
              <braces/>
            </command>
          </braces>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="имя драйвера СУБД, а"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="dbParams"/>
              </braces>
              <braces/>
            </command>
          </braces>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="параметры базы данных. Набор параметров зависит от СУБД. Так, для работы с MySQL инициализация может иметь вид:"/>
          <braces>
            <text value="{}"/>
            <command value="\small"/>
            <command value="\begin">
              <braces>
                <text value="string libName=&amp;quot;libardbms_mysql.so&amp;quot;; std::map&amp;lt;string, string&amp;gt; dbParams; dbParams"/>
              </braces>
              <braces/>
              <braces>
                <text value="&amp;quot;DSN&amp;quot;"/>
              </braces>
              <braces/>
              <braces>
                <text value="=&amp;quot;&amp;lt;Имя источника данных&amp;gt;&amp;quot;; dbParams"/>
              </braces>
              <braces/>
              <braces>
                <text value="&amp;quot;AutoCommit&amp;quot;"/>
              </braces>
              <braces/>
              <braces>
                <text value="=&amp;quot;off&amp;quot;; dbParams"/>
              </braces>
              <braces/>
              <braces>
                <text value="&amp;quot;UserName&amp;quot;"/>
              </braces>
              <braces/>
              <braces>
                <text value="=&amp;quot;&amp;lt;Имя"/>
              </braces>
            </command>
          </braces>
          <text value="пользователя&amp;gt;&amp;quot;; dbParams"/>
          <text value="&amp;quot;Password&amp;quot;"/>
          <text value="=&amp;quot;&amp;lt;Пароль&amp;gt;&amp;quot;; dbParams"/>
          <text value="&amp;quot;Port&amp;quot;"/>
          <text value="=&amp;quot;&amp;lt;Порт&amp;gt;&amp;quot;"/>
          <text value="; dbParams"/>
          <text value="&amp;quot;Host&amp;quot;"/>
          <text value="=&amp;quot;&amp;lt;Адрес сервера базы данных&amp;gt;&amp;quot;;"/>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="verbatim"/>
              </braces>
            </braces>
            <braces/>
            <braces/>
          </command>
          <command value="\vspace*">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="-6pt"/>
              </braces>
            </braces>
            <braces/>
          </command>
        </subsection>
        <subsection>
          <text value="Соединение"/>
          <text value="Соединение с базой данных позволяет прикладному ПО общаться с ПО сервера базы данных. Соединение является необходимым элементом процесса, позволяющим посылать команды СУБД и получать ответы. Процедура установления соединения является время- и ресурсоемкой операцией, и было бы"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="неэффективно инициировать новое соединение всякий раз, когда приложению нужно связаться"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="с базой данных. Поэтому в EffiDB реализован"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="алгоритм организации связного пула соединений. Когда приложению требуется связь с базой"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="данных, сначала происходит поиск свободного"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="соединения в пуле уже существующих соединений. Только в том случае, если свободных"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="соединений нет, создается новое соединение. Эта возможность реализована в функции"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="DataBase::"/>
              </braces>
            </command>
          </braces>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="GetConnection()"/>
          <text value=". Когда необходимость в соединении пропадает, приложение должно освободить его функцией"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="DataBase::ReleaseConnection()"/>
              </braces>
              <braces/>
              <braces>
                <text value=". Таким образом"/>
              </braces>
            </command>
            <command value="\mbox">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="EffiDB"/>
                </braces>
              </braces>
              <braces/>
              <braces>
                <text value="формирует пул свободных переиспользуемых соединений. Соединение представлено классом"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <command value="\sf">
                    <braces>
                      <text value="Effi::"/>
                    </braces>
                  </command>
                </braces>
              </braces>
            </command>
          </braces>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="Connection"/>
          <text value="."/>
          <command value="\begin">
            <braces>
              <text value="Connection* conn; conn=database-&amp;gt;GetConnection(); ... database-&amp;gt;ReleaseConnection(conn);"/>
            </braces>
          </command>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="verbatim"/>
              </braces>
            </braces>
            <braces/>
          </command>
        </subsection>
        <subsection>
          <text value="Средства манипулирования данными"/>
          <text value="Как уже было сказано, код приложения должен быть унифицированным и работать с любой из поддерживаемых СУБД. С другой стороны, каждое SQL-выражение исполняется на вполне конкретной СУБД и, следовательно, должно подчиняться строгим правилам синтаксиса данной СУБД. Чтобы разрешить это противоречие, EffiDB строит SQL-запрос в несколько этапов. Параметры SQL-запроса аккумулируются одним из четырех классов (каждый класс соответствует одному из видов SQL-выражений):"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Effi::Selector"/>
              </braces>
              <braces/>
              <braces>
                <text value=","/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <command value="\sf">
                    <braces>
                      <text value="Effi::Inserter"/>
                    </braces>
                    <braces/>
                    <braces>
                      <text value=","/>
                    </braces>
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <command value="\sf">
                          <braces>
                            <text value="Effi::Deleter"/>
                          </braces>
                          <braces/>
                          <braces>
                            <text value=","/>
                          </braces>
                          <braces>
                            <braces>
                              <text value="{}"/>
                              <command value="\sf">
                                <braces>
                                  <text value="Effi::Updater"/>
                                </braces>
                                <braces/>
                                <braces>
                                  <text value=". К параметрам относится"/>
                                </braces>
                              </command>
                            </braces>
                          </braces>
                        </command>
                      </braces>
                    </braces>
                  </command>
                </braces>
              </braces>
            </command>
          </braces>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="все необходимое для формирования запроса: множество выбираемых данных, список таблиц, из"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="которых выбираются данные, условия выборки, условия группировки, ограничения, условия сортировки и т."/>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="сбор полной информации, достаточной для построения выражения, при этом они не формируют собственно SQL-выражения. Библиотека"/>
          <command value="\mbox">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="EffiDB"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value="позволяет строить разнообразные выражения, в том числе с использованием псевдонимов, инструкций join, сортировки и т."/>
            </braces>
          </command>
          <text value="п. Каждый класс-агент имеет функцию"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Execute()"/>
              </braces>
              <braces/>
              <braces>
                <text value=", которая, в свою очередь, вызывает соответствующую функцию драйвера СУБД. Эта функция формирует строку SQL-запроса в соответствии с синтаксисом SQL конкретной СУБД."/>
              </braces>
            </command>
          </braces>
        </subsection>
      </section>
      <section id="id6">
        <braces>
          <text value="\section{}"/>
        </braces>
        <text value="Формирование SQL-запросов"/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="она представляет собой список книг:"/>
        <command value="\end">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="multicols"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\hrule"/>
        <command value="\begin">
          <braces>
            <text value="ID Title Author Price Qty 101 Algorithms + Data Structures = Programs Wirth 120.35 14 187 1001 Nights NULL 999.99 2 318 The Decameron Boccaccio 1285.99 1 325 C++ Stroustrup 59.85 10 400 The Art of Computer Programming Knuth 299.99 0"/>
          </braces>
        </command>
        <command value="\end">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="verbatim"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\vspace*">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="3pt"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\hrule"/>
        <command value="\begin">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="2"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <subsection>
          <text value="Установление соединения"/>
          <text value="В начале работы необходимо определить, драйвер какой СУБД будет использован, задать параметры базы данных, создать объект DataBase и установить соединение:"/>
          <command value="\begin">
            <braces>
              <text value="DataBase* database= new DataBase(libName, dbParams); Connection* conn; try"/>
            </braces>
            <braces>
              <braces>
                <text value="{}"/>
                <text value="conn=database-&amp;gt;GetConnection();"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value="catch(Exception e)"/>
            </braces>
            <braces>
              <braces>
                <text value="{}"/>
                <text value="cerr &amp;lt;&amp;lt; &amp;quot;ERROR: &amp;quot; &amp;lt;&amp;lt; e.What() &amp;lt;&amp;lt; endl; database-&amp;gt;ReleaseConnection(conn); throw;"/>
              </braces>
            </braces>
            <braces/>
          </command>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="verbatim"/>
              </braces>
            </braces>
            <braces/>
          </command>
        </subsection>
        <subsection>
          <text value="Выборка из таблицы"/>
          <text value="Рассмотрим теперь задачу построения запроса, выбирающего дорогие книги и возвращающего идентификатор книги, ее название и цену с учетом НДС. Таблица базы данных представлена объектом класса"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Effi::SimpleTable"/>
              </braces>
              <braces/>
            </command>
          </braces>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="объектами класса"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Effi::Column"/>
              </braces>
              <braces/>
              <braces>
                <text value=":"/>
              </braces>
            </command>
            <command value="\begin">
              <braces>
                <text value="// Определение таблицы базы данных SimpleTable bookStore(&amp;quot;Bookstore&amp;quot;); // Определение колонок таблицы, необходимых // для запроса Column ID(bookStore, &amp;quot;ID&amp;quot;); Column Title(bookStore, &amp;quot;Title&amp;quot;); Column Price(bookStore, &amp;quot;Price&amp;quot;);"/>
              </braces>
            </command>
            <command value="\end">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="verbatim"/>
                </braces>
              </braces>
              <braces/>
              <braces>
                <text value="Для доступа к результатам запроса используются вспомогательные переменные. Соответствие между полями таблиц базы данных и вспомогательными переменными устанавливается посредством технологии связывания ("/>
              </braces>
            </command>
          </braces>
          <command value="\textit">
            <braces>
              <text value="\textit{}"/>
            </braces>
            <text value="binding"/>
          </command>
          <text value="), как будет показано ниже."/>
          <command value="\begin">
            <braces>
              <text value="// Определение вспомогательных переменных // для доступа к результатам запроса int id; string title; double totalPrice; // Пороговое значение цены double threshold = 300; // Ставка НДС,"/>
            </braces>
          </command>
          <text value="double vat = 0.2;"/>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="verbatim"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value="Собственно формирование запроса состоит из указания колонок и связанных с ними вспомогательных переменных, а также установки критериев выбора:"/>
            </braces>
            <braces>
              <braces>
                <text value="{}"/>
                <command value="\small"/>
                <command value="\begin">
                  <braces>
                    <text value="Selector s; // Определение набора колонок таблицы // и связывание их // со вспомогательными переменными s &amp;lt;&amp;lt; ID.Bind(id) &amp;lt;&amp;lt; Title.Bind(title) &amp;lt;&amp;lt; (Price*(1+vat)).As(&amp;quot;TotalPrice&amp;quot;). Bind(totalPrice); // Определение критериев выборки s.Where(Price &amp;gt; threshold);"/>
                  </braces>
                </command>
                <command value="\end">
                  <braces>
                    <braces>
                      <text value="{}"/>
                      <text value="verbatim"/>
                    </braces>
                  </braces>
                  <braces/>
                  <braces/>
                  <braces>
                    <text value="Выполнение запроса осуществляется посредством вызова метода"/>
                  </braces>
                  <braces>
                    <braces>
                      <text value="{}"/>
                      <command value="\sf">
                        <braces>
                          <text value="Effi::Selector::Execute()"/>
                        </braces>
                        <braces/>
                        <braces>
                          <text value=":"/>
                        </braces>
                      </command>
                      <command value="\begin">
                        <braces>
                          <text value="// Выполнение SQL-запроса DataSet data=s.Execute(conn);"/>
                        </braces>
                      </command>
                      <command value="\end">
                        <braces>
                          <braces>
                            <text value="{}"/>
                            <text value="verbatim"/>
                          </braces>
                        </braces>
                        <braces/>
                        <braces>
                          <text value="Результатом выполнения SQL-запроса типа SELECT является набор записей. Доступ к результатам запроса осуществляется посредством класса"/>
                        </braces>
                      </command>
                    </braces>
                  </braces>
                </command>
              </braces>
            </braces>
          </command>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Effi::DataSet"/>
              </braces>
              <braces/>
              <braces>
                <text value=". Функция"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <command value="\sf">
                    <braces>
                      <text value="DataSet::Fetch()"/>
                    </braces>
                    <braces/>
                    <braces>
                      <text value="считывает очередную запись в соответствующие вспомогательные переменные, связанные с колонками таблицы результатов функцией"/>
                    </braces>
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <command value="\sf">
                          <braces>
                            <text value="Bind()"/>
                          </braces>
                          <braces/>
                          <braces>
                            <text value=". Так, в рассматриваемом примере колонка"/>
                          </braces>
                          <braces>
                            <braces>
                              <text value="{}"/>
                              <command value="\sf">
                                <braces>
                                  <text value="ID"/>
                                </braces>
                                <braces/>
                                <braces>
                                  <text value="связана с переменной id, колонка"/>
                                </braces>
                                <braces>
                                  <braces>
                                    <text value="{}"/>
                                    <command value="\sf">
                                      <braces>
                                        <text value="Title"/>
                                      </braces>
                                      <braces/>
                                    </command>
                                  </braces>
                                </braces>
                              </command>
                            </braces>
                          </braces>
                        </command>
                      </braces>
                    </braces>
                  </command>
                </braces>
              </braces>
            </command>
          </braces>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="с переменной"/>
          <command value="\linebreak">
            <braces>
              <text value="\linebreak"/>
            </braces>
          </command>
          <text value="title, а выражение ("/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Price*(1+vat)"/>
              </braces>
              <braces/>
            </command>
          </braces>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="с переменной totalPrice. После считывания внутренний указатель функции"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Fetch()"/>
              </braces>
              <braces/>
              <braces>
                <text value="смещается на следующую запись. Если запись последняя, то функция"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <command value="\sf">
                    <braces>
                      <text value="Fetch()"/>
                    </braces>
                    <braces/>
                    <braces>
                      <text value="возвращает false. Если поле таблицы результатов не связано ни с одной вспомогательной переменной, то данные этого поля недоступны из С++ кода. Следующий код выводит результат исполнения запроса SELECT:"/>
                    </braces>
                  </command>
                  <command value="\begin">
                    <braces>
                      <text value="while(data.Fetch())"/>
                    </braces>
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <text value="cerr &amp;lt;&amp;lt; id &amp;lt;&amp;lt; &amp;quot;; &amp;quot; &amp;lt;&amp;lt; title &amp;lt;&amp;lt; &amp;quot;; &amp;quot; &amp;lt;&amp;lt; totalPrice &amp;lt;&amp;lt; endl;"/>
                      </braces>
                    </braces>
                    <braces/>
                  </command>
                  <command value="\end">
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <text value="verbatim"/>
                      </braces>
                    </braces>
                    <braces/>
                    <braces>
                      <text value="Сформированный SQL-запрос имеет вид:"/>
                    </braces>
                  </command>
                  <command value="\begin">
                    <braces>
                      <text value="SELECT ID, Title, Price*1.2 AS TotalPrice FROM Bookstore WHERE Price &amp;gt; 300;"/>
                    </braces>
                  </command>
                  <command value="\end">
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <text value="verbatim"/>
                      </braces>
                    </braces>
                    <braces/>
                    <braces>
                      <text value="и возвращает следующие данные:"/>
                    </braces>
                  </command>
                  <command value="\begin">
                    <braces>
                      <text value="ID Title TotalPrice 187; 1001 Nights; 1199.99 318; The Decameron; 1543.19"/>
                    </braces>
                  </command>
                  <command value="\end">
                    <braces>
                      <braces>
                        <text value="{}"/>
                        <text value="verbatim"/>
                      </braces>
                    </braces>
                    <braces/>
                  </command>
                </braces>
              </braces>
            </command>
          </braces>
        </subsection>
        <subsection>
          <text value="Классы-обертки реляционных таблиц"/>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="он требует создавать представления реляционных сущностей (таблиц и колонок базы данных) в С++ всякий раз, когда с ними работают. Так, если некая таблица участвует в одном SQL-запросе дважды, то требуется создавать два объекта класса"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="SimpleTable"/>
              </braces>
              <braces/>
              <braces>
                <text value=", описывать для каждого из них одинаковый набор колонок и т."/>
              </braces>
            </command>
          </braces>
          <text value="п. Библиотека EffiDB предоставляет возможность создать универсальный класс-обертку для работы с известной на момент компиляции таблицей базы данных. Такой класс должен быть производным от класса"/>
          <braces>
            <text value="{}"/>
            <command value="\sf">
              <braces>
                <text value="Effi::Domain"/>
              </braces>
              <braces/>
              <braces>
                <text value=":"/>
              </braces>
            </command>
            <command value="\end">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="multicols"/>
                </braces>
              </braces>
              <braces/>
            </command>
            <command value="\hrule"/>
            <command value="\vspace*">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="6pt"/>
                </braces>
              </braces>
              <braces/>
            </command>
            <command value="\begin">
              <braces>
                <text value="class Bookstore : public Domain"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="public : struct BookstoreDomain"/>
                </braces>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="Column ID; Column Title; Column Author; Column Price; BookstoreDomain(const SimpleTable&amp;amp; table) : ID(table, &amp;quot;ID&amp;quot;); , Title(table, &amp;quot;Title&amp;quot;); , Author(table, &amp;quot;Author&amp;quot;); , Price(table, &amp;quot;Price&amp;quot;)"/>
                </braces>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                </braces>
              </braces>
              <braces/>
              <braces>
                <text value="Domain_; boost::optional&amp;lt;int&amp;gt; ID; boost::optional&amp;lt;string&amp;gt; Title; boost::optional&amp;lt;string&amp;gt; Author; Decimal Price; Bookstore() : Domain(&amp;quot;Bookstore&amp;quot;), Domain_(*this)"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="// COLUMN_PK означает, что колонка входит в первичный ключ columns_.push_back(ColSpec(Domain_.ID.Bind(ID), COLUMN_PK)); // COLUMN_ ORDINARY означает, что колонка не является ключевой columns_.push_back(ColSpec(Domain_.Title.Bind(Title), COLUMN_ORDINARY)); columns_.push_back(ColSpec(Domain_.Author.Bind(Author), COLUMN_ORDINARY)); columns_.push_back(ColSpec(Domain_.Price.Bind(Price), COLUMN_ORDINARY));"/>
                </braces>
              </braces>
              <braces/>
              <braces>
                <text value="Bookstore(const Bookstore&amp;amp; copy) : Domain(&amp;quot;Bookstore&amp;quot;), Domain_(*this) , ID(copy.ID); , Name(copy.Title); , Author(copy.Author); , Phone(copy.Price)"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="columns_.push_back(ColSpec(Domain_.ID.Bind(ID), COLUMN_SK)); columns_.push_back(ColSpec(Domain_.Title.Bind(Title), COLUMN_ORDINARY)); columns_.push_back(ColSpec(Domain_.Author.Bind(Author), COLUMN_ORDINARY)); columns_.push_back(ColSpec(Domain_.Price.Bind(Price), COLUMN_ORDINARY));"/>
                </braces>
              </braces>
              <braces/>
              <braces>
                <text value="Bookstore&amp;amp; operator= (const Bookstore&amp;amp; copy)"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="ID = copy.ID; Title =copy.Title; Author=copy.Author; Price =copy.Price; return *this;"/>
                </braces>
              </braces>
              <braces/>
              <braces>
                <text value="virtual Bookstore()"/>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="BookstoreDomain* operator-&amp;gt;()"/>
                </braces>
              </braces>
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="return &amp;amp;Domain_;"/>
                </braces>
              </braces>
              <braces/>
              <braces/>
              <braces>
                <text value=";"/>
              </braces>
            </command>
            <command value="\end">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="verbatim"/>
                </braces>
              </braces>
              <braces/>
            </command>
            <command value="\vspace*">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="6pt"/>
                </braces>
              </braces>
              <braces/>
            </command>
            <command value="\hrule"/>
            <command value="\begin">
              <braces>
                <braces>
                  <text value="{}"/>
                  <text value="2"/>
                </braces>
              </braces>
              <braces/>
              <braces>
                <text value="В классе-обертке определяются колонки таблицы и набор вспомогательных переменных, соответствующий набору колонок, а также устанавливается соответствие между ними. Имена объектов-колонок и имена вспомогательных переменных задаются совпадающими с именами полей таблиц. Имена объектов-колонок доступны посредством оператора &amp;lt;&amp;lt;"/>
              </braces>
            </command>
            <formula id="id7" value="$\rightarrow$"/>
            <text value="&amp;gt;&amp;gt;, например Bookstore"/>
            <formula id="id8" value="$\rightarrow$"/>
          </braces>
          <command value="\specialsymbol">
            <braces>
              <text value="~---"/>
            </braces>
          </command>
          <text value="посредством оператора &amp;lt;&amp;lt;.&amp;gt;&amp;gt;, например"/>
          <command value="\mbox">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="Bookstore.Price"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value=". Колонки, входящие в первичный ключ таблицы, помечаются как ключевые. Таким образом, необходимость всякий раз при использовании экземпляров класса Bookstore связывать колонки таблицы со вспомогательными переменными отпадает. Только в тех случаях, когда вспомогательные переменные не имеют соответствующей колонки, но требуются в конкретном запросе (totalPrice в рассматриваемом примере), следует по-прежнему явным образом создавать сами переменные и устанавливать их связь с колонками таблицы результатов запроса. Работа с классами-обертками обеспечивает ряд немаловажных преимуществ. Во-первых, описание таких сущностей базы данных, как таблица и ее колонки, локализовано в одном месте кода. Это снижает до минимума риск появления синтаксических ошибок и облегчает процесс поддержки и развития приложения. Во-вторых, код, формирующий рассмотренный выше SQL-запрос, оказывается гораздо короче:"/>
            </braces>
          </command>
          <command value="\begin">
            <braces>
              <text value="Bookstore tbl; double threshold = 300; double vat = 0.2; double totalPrice; Selector s; s &amp;lt;&amp;lt; tbl-&amp;gt;ID &amp;lt;&amp;lt; tbl-&amp;gt;Title &amp;lt;&amp;lt; (tbl-&amp;gt;Price*(1+vat)) .As(&amp;quot;TotalPrice&amp;quot;).Bind(totalPrice); s.Where(tbl-&amp;gt;Price&amp;gt;threshold);"/>
            </braces>
          </command>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="verbatim"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value="Легко видеть, что создание объекта, представляющего таблицу, сводится теперь к объявлению переменной, а объявление вспомогательных переменных и связывание их с колонками базы данных не требуется. И, наконец, рассмотрим сценарий, в котором выгода от использования класса-обертки наиболее существенна и очевидна. На практике чаще всего используются SQL-запросы по первичному ключу таблицы. Синтаксис EffiDB в этом случае крайне прост, а размер текста кода оказывается даже меньшим, чем размер итогового SQL-запроса. Попробуем, к примеру, выполнить все 4 возможных вида SQL-выражений на рассматриваемой базе данных:"/>
            </braces>
          </command>
          <command value="\begin">
            <braces>
              <text value="// Определение уникального кода // для новой книги // и проверка его доступности tbl.ID=100; if (tbl.Select(conn)) throw Exception (&amp;quot;Книга с таким кодом уже существует.&amp;quot;); // Добавление новой книги tbl.Title = &amp;quot;Hobbit&amp;quot;; tbl.Author = &amp;quot;Tolkien&amp;quot;; tbl.Insert(conn); // Изменение названия книги tbl.Title = &amp;quot;Hobbit or There and Back Again&amp;quot;; tbl.Update(conn); // Удаление книги tbl.Delete(conn);"/>
            </braces>
          </command>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="verbatim"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value="Соответствующие SQL-выражения:"/>
            </braces>
          </command>
          <command value="\begin">
            <braces>
              <text value="SELECT * FROM Bookstore WHERE ID = 100; INSERT INTO Bookstore (ID, Title, Author, Price, Qty) VALUES (100, &amp;quot;Hobbit&amp;quot;, &amp;quot;Tolkien&amp;quot;, NULL, NULL); UPDATE Bookstore SET Title = &amp;quot;Hobbit or There and Back Again&amp;quot;, Author = &amp;quot;Tolkien&amp;quot;, Price = NULL, Qty = NULL WHERE ID = 100; DELETE FROM Bookstore WHERE ID = 100;"/>
            </braces>
          </command>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="verbatim"/>
              </braces>
            </braces>
            <braces/>
            <braces>
              <text value="Аналогичным образом составляются запросы по составному первичному ключу."/>
            </braces>
          </command>
        </subsection>
      </section>
      <section id="id9">
        <braces>
          <text value="\section{}"/>
        </braces>
        <text value="Интегрированная среда разработки приложений Effi"/>
        <text value="Библиотека EffiDB является лишь одним из компонентов интегрированной среды разработки приложений Effi. Разработчик, использующий среду Effi, описывает приложение на декларативном языке в формате XML (eXtensible Markup Language), оперируя понятиями классов, методов и элементов графического интерфейса. Все объекты C++ кода, представляющие понятия реляционной базы данных, генерируются автоматически. В частности, получается полностью готовый к использованию класс-обертка. Разработчик имеет возможность сосредоточиться на программировании логики приложения и не тратить усилия на описание вспомогательных объектов."/>
      </section>
      <section id="id10">
        <braces>
          <text value="\section{}"/>
        </braces>
        <text value="Заключение"/>
        <text value="Для решения проблемы унифицированного"/>
        <command value="\linebreak">
          <braces>
            <text value="\linebreak"/>
          </braces>
        </command>
        <text value="взаимодействия с разнотипными СУБД создана оригинальная С++ библиотека EffiDB; библиоте-"/>
        <command value="\linebreak">
          <braces>
            <text value="\linebreak"/>
          </braces>
        </command>
        <text value="ка доступна в сети Интернет по адресу"/>
        <braces>
          <text value="{}"/>
          <command value="\sf">
            <braces>
              <text value="http://"/>
            </braces>
          </command>
        </braces>
        <command value="\linebreak">
          <braces>
            <text value="\linebreak"/>
          </braces>
        </command>
        <text value="sourceforge.net/projects/effidb"/>
        <text value=""/>
        <command value="\cite">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="7-y"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <text value=". Библиотека EffiDB гарантирует полную переносимость программных приложений за счет изоляции прикладного кода от специфики конкретной СУБД. В библиотеке реализован механизм динамического подключения драйверов разных СУБД в процессе работы приложения, а также возможность одновременного подключения нескольких СУБД. Библиотека обеспечивает защиту от синтаксических ошибок в SQL-выражениях за счет разбиения построения SQL-выражений на несколько этапов и проверки на момент компиляции. Библиотека EffiDB используется в ряде проектов разработки ПО компании ASoft"/>
          </braces>
          <braces>
            <braces>
              <text value="{}"/>
              <command value="\sf">
                <braces>
                  <text value="http://asoft.ru"/>
                </braces>
                <braces/>
                <braces>
                  <text value=", среди которых:"/>
                </braces>
              </command>
            </braces>
          </braces>
        </command>
        <itemize/>
        <braces>
          <text value="{}"/>
          <command value="\small"/>
          <command value="\frenchspacing">
            <braces>
              <braces>
                <text value="{}"/>
              </braces>
            </braces>
          </command>
        </braces>
        <command value="\addcontentsline">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="toc"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <braces>
              <text value="{}"/>
              <text value="section"/>
            </braces>
          </braces>
          <braces/>
          <braces>
            <braces>
              <text value="{}"/>
              <text value="Литература"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <command value="\begin">
          <braces>
            <braces>
              <text value="{}"/>
              <text value="9"/>
            </braces>
          </braces>
          <braces/>
        </command>
        <item id="id11" value="\bibitem">
          <braces>
            <text value="\bibitem{6-y}"/>
          </braces>
        </item>
        <text value="Список современых средств объектно-реляционного отображения доступа к данным."/>
        <braces>
          <text value="{}"/>
          <command value="\sf">
            <braces>
              <text value="http://en.wikipedia. org/wiki/List"/>
            </braces>
          </command>
          <command value="\_of"/>
          <command value="\_object">
            <braces>
              <text value="-relational"/>
            </braces>
          </command>
          <command value="\_mapping"/>
          <command value="\_software">
            <braces/>
            <braces>
              <text value="."/>
            </braces>
          </command>
        </braces>
        <item id="id12" value="\bibitem">
          <braces>
            <text value="\bibitem{1-y}"/>
          </braces>
        </item>
        <author value="\Au{}"/>
        <text value="Янушко А."/>
        <text value="В."/>
        <text value="Современные реляционные СУБД // Банки и технологии, 1998. №"/>
        <text value="2."/>
        <item id="id13" value="\bibitem">
          <braces>
            <text value="\bibitem{2-y}"/>
          </braces>
        </item>
        <author value="\Au{}"/>
        <text value="Ambler S."/>
        <text value="W., Sadalage P."/>
        <text value="J."/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="Addison-Wesley Professional, 2006. 384 p."/>
        <item id="id14" value="\bibitem">
          <braces>
            <text value="\bibitem{4-y}"/>
          </braces>
        </item>
        <author value="\Au{}"/>
        <text value="Gray J., Reuter A."/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="Morgan Kaufmann Publs., 1993."/>
        <item id="id15" value="\bibitem">
          <braces>
            <text value="\bibitem{3-y}"/>
          </braces>
        </item>
        <author value="\Au{}"/>
        <text value="Бегг К., Коннолли Т., Страчан А."/>
        <command value="\specialsymbol">
          <braces>
            <text value="~---"/>
          </braces>
        </command>
        <text value="М.: Вильямс, 2001."/>
        <item id="id16" value="\bibitem">
          <braces>
            <text value="\bibitem{5-y}"/>
          </braces>
        </item>
        <text value="Библиотека Boost Optional в сети Интернет."/>
        <braces>
          <text value="{}"/>
          <command value="\sf">
            <braces>
              <text value="http:// www.boost.org/doc/libs/1"/>
            </braces>
          </command>
          <command value="\_">
            <braces>
              <text value="41"/>
            </braces>
          </command>
          <command value="\_">
            <braces>
              <text value="0/libs/optional/doc/ html/index.html"/>
            </braces>
            <braces/>
            <braces>
              <text value="."/>
            </braces>
          </command>
          <command value="\label">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="end"/>
                <command value="\stat">
                  <braces/>
                </command>
              </braces>
            </braces>
          </command>
        </braces>
        <item id="id17" value="\bibitem">
          <braces>
            <text value="\bibitem{7-y}"/>
          </braces>
        </item>
        <text value="Библиотека EffiDB в сети Интернет."/>
        <braces>
          <text value="{}"/>
          <command value="\sf">
            <braces>
              <text value="http://sourceforge. net/projects/effidb"/>
            </braces>
            <braces/>
            <braces>
              <text value="."/>
            </braces>
          </command>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="thebibliography"/>
              </braces>
            </braces>
            <braces/>
            <braces/>
            <braces/>
          </command>
          <command value="\end">
            <braces>
              <braces>
                <text value="{}"/>
                <text value="multicols"/>
              </braces>
            </braces>
            <braces/>
          </command>
        </braces>
      </section>
    </fulltext>
  </paper>
</papers>